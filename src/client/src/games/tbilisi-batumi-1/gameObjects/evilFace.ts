import { colliderCategories } from "../helper/colliderCategories";
import { GamePlay } from "../scenes/gamePlay";

const verticiesData = {
  body: [
    [
      { x: 565.4748816049682, y: 405.3805835263981 },
      { x: 567.8289096990176, y: 404.1623403062641 },
      { x: 561.0022282262744, y: 395.83767830201566 },
      { x: 557.7065888946053, y: 386.90389468770024 },
      { x: 558.6482001322249, y: 377.36098946331776 },
      { x: 563.1208535109188, y: 372.2849760460931 },
      { x: 568.2997153178275, y: 370.45761121589226 },
      { x: 573.4785771247361, y: 371.26977336264815 },
      { x: 577.0096192658102, y: 375.5336246331169 },
      { x: 565.4748816049682, y: 376.14274624318386 },
      { x: 566.651895651993, y: 381.82788127047553 },
      { x: 570.8891462212819, y: 386.7008541510112 },
      { x: 577.2450220752152, y: 391.5738270315469 },
      { x: 572.0661602683065, y: 400.7106511825514 },
      { x: 576.5388136470003, y: 405.3805835263981 },
      { x: 580.3052585974795, y: 425.0755155852299 },
      { x: 587.1319400702226, y: 429.94848846576554 },
      { x: 591.6045934489165, y: 441.72483959372687 },
      { x: 595.8418440182054, y: 436.2427451031242 },
      { x: 599.6082889686844, y: 444.9734881807506 },
      { x: 603.8455395379733, y: 434.6184208096123 },
      { x: 607.8473872978573, y: 439.8974747635259 },
      { x: 611.6138322483364, y: 429.13632631900964 },
      { x: 618.9113193398895, y: 425.2785561219189 },
      { x: 622.6777642903685, y: 405.98970513646503 },
      { x: 627.1504176690623, y: 401.5228133293073 },
      { x: 622.2069586715586, y: 392.1829486416139 },
      { x: 628.562834525492, y: 387.1069352243892 },
      { x: 631.8584738571611, y: 381.82788127047553 },
      { x: 633.2708907135907, y: 376.9549083899398 },
      { x: 622.4423614809635, y: 375.3305840964279 },
      { x: 625.9734036220376, y: 371.0667328259592 },
      { x: 631.3876682383512, y: 370.2545706792032 },
      { x: 637.2727384734748, y: 372.6910571194711 },
      { x: 641.5099890427637, y: 382.2339623438535 },
      { x: 640.5683778051439, y: 388.5282189812121 },
      { x: 637.5081412828797, y: 395.43159722863766 },
      { x: 631.3876682383512, y: 403.7562592328862 },
      { x: 633.5062935229956, y: 405.98970513646503 },
      { x: 640.8037806145488, y: 398.0711242055945 },
      { x: 646.4534480402674, y: 387.5130162977672 },
      { x: 646.4534480402674, y: 374.315381412983 },
      { x: 642.4516002803834, y: 366.1937599454235 },
      { x: 634.9187103794253, y: 360.9147059915098 },
      { x: 626.2088064314426, y: 357.86909794117497 },
      { x: 616.792694055245, y: 359.4934222346869 },
      { x: 610.2014153919067, y: 363.55423296846664 },
      { x: 606.4349704414277, y: 367.4120031655574 },
      { x: 599.6082889686844, y: 365.7876788720455 },
      { x: 592.5462046865363, y: 368.02112477562434 },
      { x: 587.1319400702226, y: 362.7420708217107 },
      { x: 580.3052585974795, y: 359.4934222346869 },
      { x: 570.8891462212819, y: 358.275179014553 },
      { x: 562.650047892109, y: 361.1177465281988 },
      { x: 557.4711860852003, y: 364.97551672528954 },
      { x: 553.2339355159114, y: 371.47281389933715 },
      { x: 551.5861158500768, y: 379.3913948302077 },
      { x: 552.0569214688867, y: 386.7008541510112 },
      { x: 555.1171579911509, y: 393.6042323984368 },
      { x: 560.0606169886546, y: 399.8984890357954 },
    ],
  ],
};

export class EvilFace {
  body!: Phaser.Physics.Matter.Sprite;

  constructor(
    public scene: GamePlay,
    public x: number,
    public y: number,
    public duration: number,
    public posY: number
  ) {
    this.init();
  }

  init() {
    this.addBody();
    this.addAnimation();
  }

  addAnimation() {
    this.scene.tweens.add({
      targets: this.body,
      duration: this.duration * 1000,
      yoyo: true,
      y: this.body.y + this.posY,
      repeat: -1,
    });
  }

  addBody() {
    this.body = this.scene.matter.add
      .sprite(this.x, this.y, "evil-face", undefined, {
        isStatic: true,
        friction: 0,
        restitution: 0,
        shape: {
          type: "fromVerts",
          verts: verticiesData.body,
        },
      } as Phaser.Types.Physics.Matter.MatterBodyConfig)
      .setDepth(-100);

    this.body.setCollisionCategory(colliderCategories[1]);
    this.body.setCollidesWith(colliderCategories[2]);
    this.body.setFixedRotation();

    this.body.setOrigin(0.5, 0.4);
  }
}
